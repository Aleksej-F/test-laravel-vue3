<template>
  
  <section class="main">
      <div class="wrap wrap-container">
        <div class="wrap main-container">
          <h1>Официальный дистрибьютор акустических материалов</h1>
          <img src="../assets/img/the picture on the main page.png" alt="">
          <svg   fill="#ffffff"  viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
          </svg>
        </div>
      </div>
    </section>
    <section class="aboutus">
      <div class="aboutus-col">
        <div class="aboutus-info">
          <span  class="info-title">О НАС</span>
          
          <b>Наша миссия:</b>
          <p> - создание комфортной среды в помещениях с использованием 
            функциональных материалов
          </p>
          

          <b>Наши направления:</b>
          <p>
            - создание комфортной акустики внутри помещений с 
            использованием акустических материалов Ecophon (Швеция);
          </p>
          <p>
            - поставка и монтаж подвесных потолков и сложных потолочных 
            систем, в т.ч. многоуровневых, с криволинейными переходами, 
            со скрытым освещением;
          </p>
          <p>
            - производство свободно висящих потолочных панелей и Баффлов с возможностью
            покраски в любой цвет на своем оборудовании.
          </p>
          <span>
            Опыт наших сотрудников в данной сфере более15 лет, что позволяет 
            качественно и профессионально реализовывать проекты любой сложности.
          </span>
        </div>
      </div>
      <div class="aboutus-col"></div>
    </section>
   <section id="services">
      <div class="wrap2">
        <a name="services"></a>
        <span  class="info-title">УСЛУГИ</span>
      </div>
      <div class="wrap">
        <div class="services-row">
          <div class="services-col">
            <div class="services-item">
              <img src="../assets/img/edit1.jpg" alt="">
              <h2>Работа с проектами</h2>
              <p>Адаптация строительных и акустических проектов с учетом 
                особенностей конкретных помещений и свойств материалов.
              </p>
            </div>
          </div>
          <div class="services-col">
            <div class="services-item">
              <img src="../assets/img/shaped ceiling.jpg" alt="">
              <h2>Изготовление/резка фигур любой формы</h2>
              <p>Изготовление свободно висящих потолочных панелей и Баффлов
                любой формы и размеров.
              </p>
            </div>
          </div>
          <div class="services-col">
            <div class="services-item">
              <img src="../assets/img/Kisti.jpg" alt="">
              <h2>Покраска панелей</h2>
              <p>Профессиональная покраска потолочных и стеновых панелей 
                в любой цвет на своем оборудовании в СПб.
              </p>
            </div>
          </div>
          <div class="services-col">
            <div class="services-item">
              <img src="../assets/img/Edition3.jpg" alt="">
              <h2>Качественный монтаж</h2>
              <p>Монтаж любого уровня сложности силами опытной бриагады, 
                прошедшей специальное обучение.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section >
    
    <section class="experience">
      <div class="wrap2">
        <div class="experience-row">
          <div class="experience-col">
            <div class="experience-item">
              <h2>Более</h2>
              <span>15лет</span>
              <p><b>Опыт работы</b></p>
            </div>
          </div>
          <div class="experience-col">
            <div class="experience-item">
              <h2>Более</h2>
              <span>50</span>
              <p><b>Крупных проектов</b></p>
            </div>
          </div>
          <div class="experience-col">
            <div class="experience-item">
              <h2>Поставка в </h2>
              <span>19</span>
              <p><b>Регионов РФ</b></p>
            </div>
          </div>
          <div class="experience-col">
            <div class="experience-item">
              <h2>Более</h2>
              <span>40</span>
              <p><b>Компаний - постоянных клиентов</b></p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <TheHomeProjects/>

    <section class="customers">
      <div class="wrap2 customers-title ">
        <span  class="info-title">НАШИ КЛИЕНТЫ</span>
      </div>
      <div class="wrap2">
        <div class="customers-cont">
          <div>
            <img src="../assets/img/oodji3.png" alt="">
          </div>
          <div>
            <img src="../assets/img/Avito.png" alt="">
          </div>
          <div>
            <img src="../assets/img/Балтика.gif" alt="">
          </div>
          <div>
            <img src="../assets/img/Англетер2.gif" alt="">
          </div>
          <div>
            <img src="../assets/img/GrandPalace.gif" alt="">
          </div>
        </div>
        <div class="customers-cont">
          <div>
            <img src="../assets/img/художественный.gif" alt="">
          </div>
        </div>
      </div>
    </section>
    <section class="contacts">
      <a name="contacts"></a>
      <div class="wrap2 customers-title ">
        <span  class="info-title">КОНТАКТЫ</span>
      </div>
      <div class="contacts-maps">
        <div style="position:relative;overflow:hidden;">
          <a href="https://yandex.ru/maps/2/saint-petersburg/?utm_medium=mapframe&utm_source=maps" style="color:#eee;font-size:12px;position:absolute;top:0px;">Санкт‑Петербург</a>
          <a href="https://yandex.ru/maps/2/saint-petersburg/house/prospekt_yelizarova_34b/Z0kYcgdnT0EHQFtjfXR4c3RgbQ==/?ll=30.407640%2C59.892839&utm_medium=mapframe&utm_source=maps&z=17.11" style="color:#eee;font-size:12px;position:absolute;top:14px;">ООО «Эко-Строй» Проспект Елизарова, 34Б</a>
          <iframe src="https://yandex.ru/map-widget/v1/?ll=30.407640%2C59.892839&mode=search&ol=geo&ouri=ymapsbm1%3A%2F%2Fgeo%3Fdata%3DCgoxNjE4ODg3MTE5ElbQoNC-0YHRgdC40Y8sINCh0LDQvdC60YIt0J_QtdGC0LXRgNCx0YPRgNCzLCDQv9GA0L7RgdC_0LXQutGCINCV0LvQuNC30LDRgNC-0LLQsCwgMzTQkSIKDdpC80EVRJJvQg%2C%2C&z=17.11"  frameborder="1" allowfullscreen="true" style="position:relative;"></iframe>
        </div>
      </div>
      <div class="wrap2">
        <div class="contacts-cont">
          <div class="contacts-col">
            <h2>Обратная связь</h2>
            <p>Ответим на все ваши вопросы по телефону +7(812) 919-78-86.
              Или просто заполните форму ниже:
            </p>
            <form name="contact-form" class="contacts-form" id="form" @submit.prevent="submit">
              <input type="text" name="name" placeholder="Имя *" required class=" _reg">
              <input type="text" name="phone" placeholder="Телефон *" required class=" _reg">
              <input type="text" name="email" placeholder="Email *" required
                class="_reg _email"
              />
              <input type="text" name="title" placeholder="Тема">
              <textarea name="message" placeholder="Сообщение"></textarea>
              <div class="contacts-form__submit">
                <input type="submit" value="Отправить">
              </div>
              
            </form>
          </div>
          <div class="contacts-col">
            <h2>Офис</h2>
            <p>192148, г.Санкт-Петербург, пр. Елизарова, д.34, лит.Б, помещение 5-Н,  офис 319</p>
            <div  class="contacts-phone">
              <b>info.ecostroi@mail.ru</b>
              <p>Телефон: +7(812) 919-78-86</p>
            </div>
            <h2 class="contacts-h2_2">Производство</h2>
            <p>СПб, Колпино, ул. Севастьянова д.23</p>
            <h2 class="contacts-h2_2">Хотите у нас работать?</h2>
            <p>Пожалуйста, отправьте резюме и сопроводительное письмо по адресу: 
              info.ecostroi@mail.ru
            </p>
            
            <h2 class="contacts-h2_phone">
              <div>Звоните:</div> <div>+7 (812) 919-78-86</div>
            </h2>
            
          </div>
        </div>
        
      </div>
    </section>
</template>

<script setup>
  import TheHomeProjects from './TheHomeProjects.vue';
  import { useLoaderStore } from '../stores/Loader.js'
  const loaders = useLoaderStore()
  
  async function submit (){ 
    let error = formValidate(form);

		if (error===0){
			let formData = new FormData(form)
			if (error) return
      loaders.setIsLoaderStatus(true)
			let response = await fetch('sendmail.php', {
				method: 'POST',
				body: formData
			})
      
			if (response.ok){
        
				let result = await response.json();
				loaders.setIsLoaderStatus(false)
        alert(result.message)
				form.reset()
			} else {
        loaders.setIsLoaderStatus(false)
				alert("Ошибка")
			}
      
		} else {
			alert('Введите корректный email')
		}
  }
  function formValidate(form) {
		let error = 0
		let formReg = document.querySelectorAll('._reg')

		for (let index = 0; index < formReg.length; index++) {
			const input = formReg[index];
			formRemoveError (input)

			if (input.classList.contains('_email')){
				if (emailTest(input)){
					formAddError (input)
					error++
				}
			} 
			// else if (input.value === ''){
			// 	formAddError (input)
			// 		error++
			// }
		}
		return error
	}

	function formAddError (input) {
		input.parentElement.classList.add('_error')
		input.classList.add('_error')
	}
	function formRemoveError (input) {
		input.parentElement.classList.remove('_error')
		input.classList.remove('_error')
	}

	function emailTest(input){
		return !/^\w+([\.-]?\w+)+@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(input.value)
	}
</script>

<style lang="scss" scoped>

.main{
  height: 100vh;
  background-image: url(../assets/img/скрин-1.jpg);
  background-attachment: fixed;
  background-size: cover;
  background-position: center;
  @media  (max-width: 768px) { 
    height: 100vw;
  }
  &-container{
    display: flex;
    flex-direction: column;
    justify-content: start;
    align-items: center;
    & h1{
      height: 0;
      overflow: clip;
    }
    & img{
      margin-top: 127px;
      width: 60%;
      @media  (max-width: 768px) { 
        width: 86%;
      }
    }
    & svg{
      width:7% ;
      height:7%;
    }
  }
}
.aboutus{
  display: flex;
  margin-bottom: 30px;
  @media  (max-width: 480px) { 
    
  }

  &-col{
    border-top: 5px solid #ffffff;
    
    width: 52%;

    &:nth-child(1){
      border-right: 5px solid #ffffff;
      background-color: #f7f5f5;
      display: flex;
      justify-content: flex-end;
      padding-bottom: 20px;
      @media  (max-width: 1279px) { 
        width: 60%;
      }
      @media  (max-width: 768px) { 
        width: 70%;
      }
      @media  (max-width: 480px) { 
        width: 100%;
        
      }
    }
    &:nth-child(2){
      border-left: 5px solid #ffffff;
      background-image: url(../assets/img/KAES-3.jpg);
      background-attachment: fixed;
      background-size: cover;
      background-repeat: no-repeat;
      width: 48%;
      @media  (max-width: 1279px) { 
        width: 40%;
      }
      @media  (max-width: 768px) { 
        width: 30%;
      }
      @media  (max-width: 480px) { 
        width: 0;
      }
    }
  }
  &-info{
    width: 30vw;
    display: flex;
    flex-direction: column;
    font-size: 17px;
    margin-right: 20px;
    text-overflow: ellipsis; /* Добавляем многоточие */
    @media  (max-width: 1279px) { 
      width: 80%;
    }
    & b, p, span{
      margin-top: 20px;
    }
  }
}

.info-title{
  margin-top: 20px;
  color: #c6c6c6;
  font-size: 55px;
  @media  (max-width: 480px) { 
    font-size: 40px;
  }
  &::after{
    display: block;
    content: "";
    width: 116px;
    height: 10px;
    border-top: 10px solid #edcd1f;
    margin-top: 15px;
    @media  (max-width: 480px) { 
      width: 80px;
      height: 6px;
    }
  }
}
#services{
  margin-top: 30px;
  padding-bottom: 50px;
}
.services{
  
  &-row{
    display: flex;
    justify-content: space-around;
    column-gap: 30px;
    margin-top: 20px;
    flex-wrap: wrap;
  }
  &-col{
    max-width: 260px ;
    min-width: 240px;
    flex: 1;
  }
  &-item{
    display: flex;
    flex-direction: column;
    margin-top: 20px;
    
    & img{
      width: 100%;
      height: 226px;
    }
    & h2{
      margin-top: 20px;
      font-size: 22px;
      height: 45px;
    }
    & p{
      margin-top: 20px;
      font-size: 15px;
    }
  }
}
.experience{
  background-color: #edcd1f;
  &-row{
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
  }
  &-col{
    max-width: 280px ;
    min-width: 220px;
    flex: 1;
    &:nth-child(4){ 
      & span {
     
        border-right: 2px solid #edcd1f;
        
    }}
  }
  &-item{
    display: flex;
    flex-direction: column;
    color: #ffffff;
    text-align: center;
    
    & h2{
      margin-top: 30px;
      font-size: 30px;
    }
    & span {
      margin-top: 20px;
      font-size: 60px;
      border-right: 2px solid #ffffff;
      @media  (max-width: 480px) { 
        border-right: 2px solid #edcd1f;
      }
    }
    & p{
      margin: 40px auto 50px;
      color: #3d5975;
      font-size: 22px;
    }
    
  }
}

.customers{
  background-color: #fbf9f9;
  padding-top: 10px;
  padding-bottom: 30px;
  &-title{
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    & span{
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  }
  &-cont{
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 30px ;
    & div{
      height: 112px;
      width: 187px;
      & img{
        width: 100%;
      }
    }
  }
}
.contacts{
  padding-bottom: 20px;

  &-maps{
    display: flex;
    justify-content: center;
    margin-top: 60px;
    & div iframe{
      width: 75vw;
      height: 450px;
    }
  }
  &-cont{
    margin-top: 60px;
    display: flex;
    justify-content: space-between;
    column-gap: 160px;
    margin-bottom: 60px;
    @media  (max-width: 768px) { 
      column-gap: 50px;
      justify-content: center;
    }
    @media  (max-width: 480px) { 
      column-gap: 0px;
      flex-wrap: wrap;
      justify-content: center;
    }
  }
  &-col{
    flex: 1;
    @media  (max-width: 768px) { 
      flex: 80vw;
    }
    & h2{
      font-size: 25px;
    }
    & >p{
      margin-top: 20px;
      font-size: 17px;
    }
  }
  &-form{
    width: 100%;

    & input, textarea {
      width: 98%;
      padding: 3px 3px 3px 5px;
      font-size: 17px;
      background-color: #c6c6c6;
      color: #ffffff;
      margin-top: 5px;
      &::-webkit-input-placeholder { 
        color: #ffffff;
      }
      &._error{
        box-shadow: 0 0 15px red;
        
      }
    }
    & textarea{
      min-height: 130px;
    }

    &__submit{
      display: flex;
      justify-content:flex-end;

    }
    & INPUT[type="submit"]{
      width: 110px;
      height: 32px;
      background-color: #002e5d;
      cursor: pointer;
      
      &:hover{
        background-color: #326aa1;
      }
    }
    
  }
  &-phone{
    margin-top: 20px;
    font-size: 15px;
  }
  &-h2{
    &_2{
      margin-top: 40px;
    }
    &_phone{
      margin-top: 60px;
      &::before{
        display: block;
        content: "";
        width: 64px;
        height: 10px;
        border-top: 10px solid #edcd1f;
        margin-top: 15px;
      }
    }
  }
  
}

.loader{
  position: absolute;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  background-color: #1f1c1c65;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 30;
  opacity: 0;
  visibility: hidden;
  & div{
    color: #f7f5f5;
  }
  &.active{
    opacity: 1;
    visibility: visible;
  }
}

</style>./TheHomeProjects.vue